(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3451ab3e"],{"908e3":function(t,e,a){"use strict";a("abed")},abed:function(t,e,a){},d408:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"/lejuAdmin/material/uploadFileOssSave",headers:t.Token,"on-success":t.success,"file-list":t.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传素材")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),a("div",{staticClass:"iamgeList"},[t._l(t.imageList,(function(e){return a("el-card",{key:e.id,staticStyle:{width:"19%","margin-top":"30px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("创建时间:"+t._s(e.createTime))])]),a("img",{staticClass:"image",attrs:{width:"80%",src:e.ossUrl}}),a("el-button",{staticStyle:{padding:"6px 30px"},attrs:{type:"danger"},on:{click:function(a){return t.del(e.id)}}},[t._v("删除")])],1)})),a("div",{staticStyle:{width:"19%","margin-top":"30px"}}),a("div",{staticStyle:{width:"19%","margin-top":"30px"}}),a("div",{staticStyle:{width:"19%","margin-top":"30px"}})],2)]),a("el-pagination",{attrs:{"current-page":t.start,"page-sizes":t.limits,"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},s=[],n=a("2f4d"),l=(a("b4fb"),a("0c6d"));function r(t){return Object(l["a"])({url:"/lejuAdmin/material/delMaterial/".concat(t),method:"DELETE"})}function c(t,e){return Object(l["a"])({url:"lejuAdmin/material/findMaterialByPage/".concat(t,"/").concat(e),method:"GET"})}var o={delMaterial:r,findMaterialByPage:c},d={data:function(){return{fileList:[],Token:{token:""},start:1,limits:[5,10,15,20],limit:5,total:null,imageList:[]}},created:function(){this.Token.token=Object(n["b"])(),this.getiamgeList()},methods:{getiamgeList:function(){var t=this;o.findMaterialByPage(this.start,this.limit).then((function(e){t.total=e.data.total,t.imageList=e.data.rows}))},success:function(t){this.$refs.upload.clearFiles()},handleSizeChange:function(t){this.limit=t,this.getiamgeList()},handleCurrentChange:function(t){this.start=t,this.getiamgeList()},del:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){o.delMaterial(t).then((function(t){if(t.success){e.$message.success("删除成功");var a=Math.ceil((e.total-1)/e.limit),i=e.start>a?a:e.start;e.start=i<1?1:i,e.getiamgeList()}else e.$message.error("删除失败")}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))}}},u=d,g=(a("908e3"),a("5d22")),h=Object(g["a"])(u,i,s,!1,null,"cda9998c",null);e["default"]=h.exports}}]);