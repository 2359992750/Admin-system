(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f048c8d"],{"1b3b":function(t,e,i){"use strict";i("b4fb");var n=i("0c6d");function r(t,e,i){return Object(n["a"])({url:"/lejuAdmin/productArticle/findArticles/".concat(t,"/").concat(e),method:"POST",data:i})}function a(t){return Object(n["a"])({url:"/lejuAdmin/productArticle/del/".concat(t),method:"DELETE"})}function o(t){return Object(n["a"])({url:"/lejuAdmin/productArticle/updateArticle",method:"POST",data:t})}function l(t){return Object(n["a"])({url:"/lejuAdmin/productArticle/addArticle",method:"POST",data:t})}function s(t){return Object(n["a"])({url:"/lejuAdmin/productArticle/changeShowStatus",method:"POST",data:t})}function c(t){return Object(n["a"])({url:"/lejuAdmin/productArticle/productArticle/".concat(t),method:"GET"})}e["a"]={getArticleList:r,delArticle:a,updateArticle:o,addArticle:l,changeShowStatus:s,productArticle:c}},"1de8":function(t,e,i){"use strict";i("cfbb")},"41f8":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[t._v("新增文章")])]),i("el-form",{ref:"article",staticClass:"demo-article",attrs:{model:t.article,rules:t.rules,"label-width":"100px"}},[i("div",{staticClass:"form_one"},[i("el-form-item",{attrs:{label:"作者",prop:"author"}},[i("el-input",{attrs:{size:"small",placeholder:"作者姓名"},model:{value:t.article.author,callback:function(e){t.$set(t.article,"author",e)},expression:"article.author "}})],1),i("el-form-item",{attrs:{label:"标题",prop:"title"}},[i("el-input",{attrs:{size:"small",placeholder:"文章标题"},model:{value:t.article.title,callback:function(e){t.$set(t.article,"title",e)},expression:"article.title"}})],1),i("el-form-item",[i("el-switch",{staticStyle:{color:"#606266"},attrs:{"inactive-text":"是否显示"},model:{value:t.article.isShow,callback:function(e){t.$set(t.article,"isShow",e)},expression:"article.isShow "}})],1)],1),i("el-form-item",{attrs:{label:"摘要"}},[i("el-input",{staticStyle:{width:"40%"},attrs:{type:"textarea",placeholder:"摘要"},model:{value:t.article.summary,callback:function(e){t.$set(t.article,"summary",e)},expression:"article.summary "}})],1),i("el-form-item",{attrs:{label:"封面图片"}},[i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{headers:t.Token,action:"/lejuAdmin/material/uploadFileOssSave","on-success":t.success,"file-list":t.fileList}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传素材")]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1),t.article.coverImg?i("img",{attrs:{height:"100",width:"100",src:t.article.coverImg,alt:""}}):t._e()],1),i("el-form-item",{attrs:{label:"切换富文本类型"}},[i("el-radio-group",{model:{value:t.article.editorType,callback:function(e){t.$set(t.article,"editorType",e)},expression:"article.editorType"}},[i("el-radio",{attrs:{label:0}},[t._v("富文本")]),i("el-radio",{attrs:{label:1}},[t._v("markdown")])],1),i("span",{staticStyle:{"margin-left":"120px",color:"red"}},[t._v("!切换编辑类型的时候会丢失已输入文本内容")])],1),i("el-form-item",[0===t.article.editorType?i("div",[i("el-upload",{ref:"uploadTi",staticClass:"upload-demo",attrs:{action:"/lejuAdmin/material/uploadFileOssSave",headers:t.Token,multiple:"","on-success":t.addTiImg}},[i("el-button",{attrs:{size:"mini",type:"primary"}},[t._v("插入富文本图片")])],1),i("TEditor",{ref:"Ti"})],1):t._e(),1===t.article.editorType?i("div",[i("MdEditor",{ref:"Md"})],1):t._e()]),i("el-form-item",{staticStyle:{width:"100%"}},[t.id?t._e():i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("article")}}},[t._v("立即新增")]),t.id?i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("article")}}},[t._v("立即修改")]):t._e()],1)],1)],1)],1)},r=[],a=i("2f4d"),o=i("1b3b"),l=i("8256"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:t.id}})},c=[],u=(i("20a5"),i("d211")),d=(i("158c"),i("550e"),i("233f"),i("d341")),h=i.n(d),m={minHeight:"200px",previewStyle:"vertical",useCommandShortcut:!0,useDefaultHTMLSanitizer:!0,usageStatistics:!1,hideModeSwitch:!1,toolbarItems:["heading","bold","italic","strike","divider","hr","quote","divider","ul","ol","task","indent","outdent","divider","table","image","link","divider","code","codeblock"]},f={name:"MarkdownEditor",props:{value:{type:String,default:""},id:{type:String,required:!1,default:function(){return"markdown-editor-"+ +new Date+(1e3*Math.random()).toFixed(0)}},options:{type:Object,default:function(){return m}},mode:{type:String,default:"markdown"},height:{type:String,required:!1,default:"300px"},language:{type:String,required:!1,default:"en_US"}},data:function(){return{editor:null}},computed:{editorOptions:function(){var t=Object.assign({},m,this.options);return t.initialEditType=this.mode,t.height=this.height,t.language=this.language,t}},watch:{value:function(t,e){t!==e&&t!==this.editor.getValue()&&this.editor.setValue(t)},language:function(t){this.destroyEditor(),this.initEditor()},height:function(t){this.editor.height(t)},mode:function(t){this.editor.changeMode(t)}},mounted:function(){this.initEditor()},destroyed:function(){this.destroyEditor()},methods:{initEditor:function(){var t=this;this.editor=new h.a(Object(u["a"])({el:document.getElementById(this.id)},this.editorOptions)),this.value&&this.editor.setValue(this.value),this.editor.on("change",(function(){t.$emit("input",t.editor.getValue())}))},destroyEditor:function(){this.editor&&(this.editor.off("change"),this.editor.remove())},setValue:function(t){this.editor.setValue(t)},getValue:function(){return this.editor.getValue()},setHtml:function(t){this.editor.setHtml(t)},getHtml:function(){return this.editor.getHtml()}}},p=f,g=i("5d22"),b=Object(g["a"])(p,s,c,!1,null,null,null),y=b.exports,v={data:function(){return{id:null,article:{author:"",title:"",isShow:!1,summary:"",editorType:0,content1:"",coverImg:""},Token:{token:""},fileList:[],rules:{author:[{required:!0,message:"请输入作者名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],title:[{required:!0,message:"请输入标题",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}]}}},created:function(){this.Token.token=Object(a["b"])(),this.id=this.$route.query.id,this.id&&this.getarticleInfo()},methods:{getarticleInfo:function(){var t=this;o["a"].productArticle(this.id).then((function(e){0===e.data.productArticle.isShow?e.data.productArticle.isShow=!1:e.data.productArticle.isShow=!0,t.article=e.data.productArticle,t.$nextTick((function(){0===e.data.productArticle.editorType?t.$refs.Ti.setContent(e.data.productArticle.content1):t.$refs.Md.setValue(e.data.productArticle.content1)}))}))},submitForm:function(t){var e=this;this.article.isShow?this.article.isShow=1:this.article.isShow=0,0==this.article.editorType?this.article.content1=this.$refs.Ti.getContent():this.article.content1=this.$refs.Md.getValue(),this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;e.id?o["a"].updateArticle(e.article).then((function(t){t.success&&(e.$message.success("修改成功"),e.$router.push("/content/article"))})):o["a"].addArticle(e.article).then((function(t){t.success&&(e.$message.success("新增文章成功"),e.$router.push("/content/article"))}))}))},resetForm:function(t){this.$refs[t].resetFields()},success:function(t,e,i){this.article.coverImg=t.data.material.ossUrl,this.$refs.upload.clearFiles()},addTiImg:function(t){this.$refs.uploadTi.clearFiles(),this.$refs.Ti.imageSuccessCBK(t.data.material.ossUrl)},changestatus:function(t){console.log(t)}},components:{TEditor:l["a"],MdEditor:y}},w=v,_=(i("1de8"),i("7c60"),Object(g["a"])(w,n,r,!1,null,"2a086099",null));e["default"]=_.exports},5278:function(t,e,i){"use strict";i("b47e")},7498:function(t,e,i){},"7c60":function(t,e,i){"use strict";i("7498")},8256:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tinymce-container",class:{fullscreen:t.fullscreen},style:{width:t.containerWidth}},[i("textarea",{staticClass:"tinymce-textarea",attrs:{id:t.tinymceId}}),t._v(" "),i("div",{staticClass:"editor-custom-btn-container"})])},r=[],a=(i("513c"),i("20a5"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-container"},[i("el-button",{style:{background:t.color,borderColor:t.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v(" upload ")]),i("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":t.fileList,"show-file-list":!0,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.beforeUpload,action:"https://httpbin.org/post","list-type":"picture-card"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v(" Click upload ")])],1),i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v(" Cancel ")]),i("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v(" Confirm ")])],1)],1)}),o=[],l=(i("84bc"),i("2eeb"),i("fe8a"),i("e18c"),i("96db"),i("af86"),i("f1a9"),{name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[]}},methods:{checkAllSuccess:function(){var t=this;return Object.keys(this.listObj).every((function(e){return t.listObj[e].hasSuccess}))},handleSubmit:function(){var t=this,e=Object.keys(this.listObj).map((function(e){return t.listObj[e]}));this.checkAllSuccess()?(this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("Please wait for all images to be uploaded successfully. If there is a network problem, please refresh the page and upload again!")},handleSuccess:function(t,e){for(var i=e.uid,n=Object.keys(this.listObj),r=0,a=n.length;r<a;r++)if(this.listObj[n[r]].uid===i)return this.listObj[n[r]].url=t.files.file,void(this.listObj[n[r]].hasSuccess=!0)},handleRemove:function(t){for(var e=t.uid,i=Object.keys(this.listObj),n=0,r=i.length;n<r;n++)if(this.listObj[i[n]].uid===e)return void delete this.listObj[i[n]]},beforeUpload:function(t){var e=this,i=window.URL||window.webkitURL,n=t.uid;return this.listObj[n]={},new Promise((function(r,a){var o=new Image;o.src=i.createObjectURL(t),o.onload=function(){e.listObj[n]={hasSuccess:!1,uid:t.uid,width:this.width,height:this.height}},r(!0)}))}}}),s=l,c=(i("5278"),i("5d22")),u=Object(c["a"])(s,a,o,!1,null,"3dae379b",null),d=u.exports,h=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],m=h,f=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],p=f,g=i("1377"),b=[];function y(){return window.tinymce}var v=function(t,e){var i=document.getElementById(t),n=e||function(){};if(!i){var r=document.createElement("script");r.src=t,r.id=t,document.body.appendChild(r),b.push(n);var a="onload"in r?o:l;a(r)}function o(e){e.onload=function(){this.onerror=this.onload=null;var t,i=Object(g["a"])(b);try{for(i.s();!(t=i.n()).done;){var n=t.value;n(null,e)}}catch(r){i.e(r)}finally{i.f()}b=null},e.onerror=function(){this.onerror=this.onload=null,n(new Error("Failed to load "+t),e)}}function l(t){t.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;var e,i=Object(g["a"])(b);try{for(i.s();!(e=i.n()).done;){var n=e.value;n(null,t)}}catch(r){i.e(r)}finally{i.f()}b=null}}}i&&n&&(y()?n(null,i):b.push(n))},w=v,_=i("0c6d");function k(t){return Object(_["a"])({url:"/lejuAdmin/material/uploadFileOss",method:"POST",data:t})}var S={upload:k},j="https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js",O={name:"Tinymce",components:{editorImage:d},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:"auto"}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"}}},computed:{containerWidth:function(){var t=this.width;return/^[\d]+(\.[\d]+)?$/.test(t)?"".concat(t,"px"):t}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick((function(){return window.tinymce.get(e.tinymceId).setContent(t||"")}))}},mounted:function(){this.init()},activated:function(){window.tinymce&&this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{init:function(){var t=this;w(j,(function(e){e?t.$message.error(e.message):t.initTinymce()}))},initTinymce:function(){var t=this,e=this;window.tinymce.init({selector:"#".concat(this.tinymceId),language:this.languageTypeList["zh"],height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:p,menubar:this.menubar,plugins:m,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(i){e.value&&i.setContent(e.value),e.hasInit=!0,i.on("NodeChange Change KeyUp SetContent",(function(){t.hasChange=!0,t.$emit("input",i.getContent())}))},setup:function(t){t.on("FullscreenStateChanged",(function(t){e.fullscreen=t.state}))},convert_urls:!1,images_upload_handler:function(t,i,n,r){r(0);var a=new FormData;a.append("file",t.blob()),S.upload(a).then((function(t){console.log(t),t.success?(i(t.data.fileUrl),r(100)):(e.$message.error("上传失败,请重新上传"),r(100))}))}})},destroyTinymce:function(){var t=window.tinymce.get(this.tinymceId);this.fullscreen&&t.execCommand("mceFullScreen"),t&&t.destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){return window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){window.tinymce.get(this.tinymceId).insertContent('<img class="wscnph" src="'.concat(t,'" >'))}}},T=O,C=(i("944e"),Object(c["a"])(T,n,r,!1,null,"5987a14e",null));e["a"]=C.exports},"944e":function(t,e,i){"use strict";i("d295")},b47e:function(t,e,i){},cfbb:function(t,e,i){},d295:function(t,e,i){}}]);