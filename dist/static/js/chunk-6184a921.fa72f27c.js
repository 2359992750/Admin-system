(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6184a921"],{"02ae":function(t,e,a){"use strict";a("e8e2")},"2c06":function(t,e,a){},"5aa3":function(t,e,a){"use strict";a("2c06")},"7e17":function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.dialogTableVisible=!0}}},[t._v("新增")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.adlist,border:""}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50",fixed:"left",align:"center"}}),a("el-table-column",{attrs:{label:"广告图片",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"list_img",attrs:{height:"100",width:"100",src:t.row.pic,alt:""}})]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"时间",align:"center",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v("开始时间"+t._s(e.row.startTime))]),a("div",[t._v("结束时间"+t._s(e.row.endTime))])]}}])}),a("el-table-column",{attrs:{prop:"name",label:"广告名称",align:"center",width:"200"}}),a("el-table-column",{attrs:{label:"点击数",prop:"clickCount",align:"center",width:"200"}}),a("el-table-column",{attrs:{prop:"orderCount",label:"下单数",align:"center",width:"200"}}),a("el-table-column",{attrs:{prop:"orderCount",label:"轮播位置",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(0==e.row.type?"app首页轮播":"其他"))])]}}])}),a("el-table-column",{attrs:{prop:"url",label:"链接地址",align:"center",width:"200"}}),a("el-table-column",{attrs:{prop:"note",label:"备注",align:"center",width:"200"}}),a("el-table-column",{attrs:{prop:"orderCount",label:"上下线状态",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(1==e.row.status?"上线":"下线"))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",fixed:"right",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"edit",attrs:{icon:"iconfont icon-eyes",type:"text",size:"mini"},on:{click:function(a){return t.edit(e.row)}}},[t._v("编辑")]),a("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"mini"},on:{click:function(a){return t.del(e.row)}}},[t._v("删除")])]}}])})],1)],1),a("el-dialog",{attrs:{title:"广告详情",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("el-form",{ref:"adInfo",attrs:{model:t.adInfo,rules:t.rules}},[a("el-row",{attrs:{gutter:100}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"广告名称",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"广告名称"},model:{value:t.adInfo.name,callback:function(e){t.$set(t.adInfo,"name",e)},expression:"adInfo.name"}})],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"备注"},model:{value:t.adInfo.note,callback:function(e){t.$set(t.adInfo,"note",e)},expression:"adInfo.note"}})],1)],1)],1),a("el-row",{attrs:{gutter:100}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"排序"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"排序"},model:{value:t.adInfo.sort,callback:function(e){t.$set(t.adInfo,"sort",e)},expression:"adInfo.sort"}})],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"产品数量"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"产品数量"},model:{value:t.adInfo.productCount,callback:function(e){t.$set(t.adInfo,"productCount",e)},expression:"adInfo.productCount"}})],1)],1)],1),a("el-row",{attrs:{gutter:100}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"链接"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"链接"},model:{value:t.adInfo.url,callback:function(e){t.$set(t.adInfo,"url",e)},expression:"adInfo.url"}})],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"首页轮播位置"}},[a("el-select",{attrs:{placeholder:"首页轮播位置"},model:{value:t.adInfo.type,callback:function(e){t.$set(t.adInfo,"type",e)},expression:"adInfo.type"}},[a("el-option",{attrs:{label:"app首页轮播 ",value:"0"}}),a("el-option",{attrs:{label:"其他",value:"1"}})],1)],1)],1)],1),a("el-row",{attrs:{gutter:100}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"开始时间"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.adInfo.startTime,callback:function(e){t.$set(t.adInfo,"startTime",e)},expression:"adInfo.startTime"}})],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"结束时间"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.adInfo.endTime,callback:function(e){t.$set(t.adInfo,"endTime",e)},expression:"adInfo.endTime"}})],1)],1)],1),a("el-row",{attrs:{gutter:100}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"上下线状态"}},[a("el-switch",{model:{value:t.adInfo.status,callback:function(e){t.$set(t.adInfo,"status",e)},expression:"adInfo.status"}})],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"图片"}},[a("el-upload",{ref:"upload",staticClass:"upload",attrs:{drag:"",action:"/lejuAdmin/material/uploadFileOss",headers:t.Token,"on-success":t.success,multiple:""}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])])],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogTableVisible=!1}}},[t._v("取 消")]),t.editAd?t._e():a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addAd("adInfo")}}},[t._v("确 定")]),t.editAd?a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.update("adInfo")}}},[t._v("确定更新广告")]):t._e()],1)],1)],1)},s=[],i=(a("e35a"),a("5e9f"),a("a9af"),a("0c6d"));function n(t){return Object(i["a"])({url:"/lejuAdmin/advertise/addAds",method:"POST",data:t})}function o(){return Object(i["a"])({url:"/lejuAdmin/advertise/adsList",method:"GET"})}function r(t){return Object(i["a"])({url:"/lejuAdmin/advertise/delAds/".concat(t),method:"DELETE"})}function d(t){return Object(i["a"])({url:"/lejuAdmin/advertise/updateAds",method:"POST",data:t})}var c={addAds:n,adlist:o,delAds:r,updateAds:d},u=a("2f4d"),f={data:function(){return{editAd:null,listLoading:!1,adlist:[],dialogTableVisible:!1,adInfo:{name:"",note:"",sort:"",productCount:"",url:"",type:"",startTime:"",endTime:"",status:!1,pic:""},Token:{token:""},rules:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"}]}}},created:function(){this.Token.token=Object(u["b"])(),this.getadList()},methods:{rTime:function(t){var e=new Date(t).toJSON();return new Date(new Date(e)+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"")},addAd:function(t){var e=this;this.listLoading=!0,this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;e.adInfo.startTime=e.rTime(e.adInfo.startTime),e.adInfo.endTime=e.rTime(e.adInfo.endTime),e.adInfo.status=1==e.adInfo.status?1:0,c.addAds(e.adInfo).then((function(t){t.success&&(e.$message.success("新增广告成功"),e.dialogTableVisible=!1,e.getadList(),e.listLoading=!1)}))}))},update:function(t){var e=this;this.listLoading=!0,this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;e.adInfo.startTime=e.rTime(e.adInfo.startTime),e.adInfo.endTime=e.rTime(e.adInfo.endTime),e.adInfo.status=1==e.adInfo.status?1:0,c.updateAds(e.adInfo).then((function(t){t.success&&(e.$message.success("更新广告成功"),e.dialogTableVisible=!1,e.getadList(),e.listLoading=!1)}))}))},getadList:function(){var t=this;this.listLoading=!0,c.adlist().then((function(e){t.listLoading=!1,t.adlist=e.data.items}))},del:function(t){var e=this;this.listLoading=!0,c.delAds(t.id).then((function(t){t.success&&(e.$message.success("删除广告成功"),e.getadList(),e.listLoading=!1)}))},edit:function(t){this.editAd=t,this.adInfo=this.editAd,this.dialogTableVisible=!0},success:function(t){this.adInfo.pic=t.data.fileUrl,this.$refs.upload.clearFiles()}}},p=f,m=(a("02ae"),a("5aa3"),a("5d22")),b=Object(m["a"])(p,l,s,!1,null,"688b8c74",null);e["default"]=b.exports},a9af:function(t,e,a){"use strict";var l=a("1c8b");l({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},e8e2:function(t,e,a){}}]);