(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-af409c50"],{"088c":function(t,e,o){},"1a2f":function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-card",[o("el-steps",{attrs:{space:700,active:t.step,"finish-status":"success","align-center":""}},[o("el-step",{attrs:{title:"商品基本信息"}}),o("el-step",{attrs:{title:"添加库存信息"}}),o("el-step",{attrs:{title:"添加移动端详情"}})],1)],1),o("el-card",{directives:[{name:"show",rawName:"v-show",value:0===t.step,expression:"step===0"}],staticClass:"box-card"},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("span",[t._v("基本信息")])]),o("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.product,"label-position":t.labelPosition,"label-width":"100px"}},[o("el-row",[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"商品名称",prop:"name",rules:[{required:!0,message:"年龄不能为空"}]}},[o("el-input",{attrs:{placeholder:"商品名称"},model:{value:t.product.name,callback:function(e){t.$set(t.product,"name",e)},expression:"product.name"}})],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"商品编码"}},[o("el-input",{attrs:{placeholder:"商品编码"},model:{value:t.product.productSn,callback:function(e){t.$set(t.product,"productSn",e)},expression:"product.productSn"}})],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"商品分类"}},[o("el-select",{attrs:{placeholder:"商品分类"},model:{value:t.product.productCategoryId,callback:function(e){t.$set(t.product,"productCategoryId",e)},expression:"product.productCategoryId"}},t._l(t.catlist,(function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1)],1),o("el-row",[o("el-form-item",{attrs:{label:"商品品牌"}},[o("el-select",{attrs:{placeholder:"品牌"},model:{value:t.product.brandId,callback:function(e){t.$set(t.product,"brandId",e)},expression:"product.brandId"}},t._l(t.brandList,(function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),o("el-row",[o("el-form-item",{attrs:{label:"商品描述"}},[o("el-input",{attrs:{placeholder:"商品描述"},model:{value:t.product.description,callback:function(e){t.$set(t.product,"description",e)},expression:"product.description"}})],1)],1),o("div",{staticClass:"name"},[t._v("商品属性")]),o("el-row",[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"商品原价"}},[o("el-input-number",{attrs:{min:0,max:10},model:{value:t.product.originalPrice,callback:function(e){t.$set(t.product,"originalPrice",e)},expression:"product.originalPrice"}})],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"促销类型"}},[o("el-select",{attrs:{placeholder:"没有促销使用原价",disabled:""},model:{value:t.product.promotionType,callback:function(e){t.$set(t.product,"promotionType",e)},expression:"product.promotionType"}},[o("el-option",{attrs:{label:"没有促销使用原价",value:"0"}}),o("el-option",{attrs:{label:"使用促销价",value:"1"}}),o("el-option",{attrs:{label:"使用会员价",value:"2"}}),o("el-option",{attrs:{label:"使用阶梯价格",value:"3"}}),o("el-option",{attrs:{label:"使用满减价格",value:"4"}}),o("el-option",{attrs:{label:"限时购",value:"5"}})],1)],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"活动价格"}},[o("el-input-number",{attrs:{disabled:"",min:0},model:{value:t.product.promotionPrice,callback:function(e){t.$set(t.product,"promotionPrice",e)},expression:"product.promotionPrice"}})],1)],1)],1),o("el-row",[o("el-col",{staticStyle:{float:"right"},attrs:{span:8}},[o("el-form-item",{attrs:{label:"重量(kg)"}},[o("el-input-number",{attrs:{min:0},model:{value:t.product.weight,callback:function(e){t.$set(t.product,"weight",e)},expression:"product.weight"}})],1)],1)],1),o("el-row",[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"审核状态"}},[o("el-switch",{model:{value:t.product.verifyStatus,callback:function(e){t.$set(t.product,"verifyStatus",e)},expression:"product.verifyStatus"}})],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"是否上架"}},[o("el-switch",{model:{value:t.product.publishStatus,callback:function(e){t.$set(t.product,"publishStatus",e)},expression:"product.publishStatus"}})],1)],1),o("el-col",{attrs:{span:8}})],1),o("el-row",{staticStyle:{"margin-top":"30px"}},[o("el-form-item",{attrs:{label:"缩略图"}},[[o("el-upload",{attrs:{action:"/lejuAdmin/material/uploadFileOss","list-type":"text",headers:t.Token,"on-success":t.uploadpic},model:{value:t.product.pic,callback:function(e){t.$set(t.product,"pic",e)},expression:"product.pic"}},[t.product.pic?o("img",{attrs:{height:"100",width:"100",src:t.product.pic,alt:""}}):o("i",{staticClass:"el-icon-plus pic"})])]],2)],1),o("div",{staticClass:"name"},[t._v("其他信息")]),o("el-row",[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"推荐状态"}},[o("el-switch",{model:{value:t.product.recommendStatus,callback:function(e){t.$set(t.product,"recommendStatus",e)},expression:"product.recommendStatus"}})],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"新品状态"}},[o("el-switch",{model:{value:t.product.newStatus,callback:function(e){t.$set(t.product,"newStatus",e)},expression:"product.newStatus"}})],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"预告商品"}},[o("el-switch",{model:{value:t.product.previewStatus,callback:function(e){t.$set(t.product,"previewStatus",e)},expression:"product.previewStatus"}})],1)],1)],1),o("el-row",[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"搜索关键词"}},[o("el-input",{attrs:{placeholder:"关键词"},model:{value:t.product.keywords,callback:function(e){t.$set(t.product,"keywords",e)},expression:"product.keywords"}})],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"库存预警"}},[o("el-input-number",{attrs:{min:0},model:{value:t.product.lowStock,callback:function(e){t.$set(t.product,"lowStock",e)},expression:"product.lowStock"}})],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"商品排序"}},[o("el-input-number",{attrs:{min:0},model:{value:t.product.sort,callback:function(e){t.$set(t.product,"sort",e)},expression:"product.sort"}})],1)],1)],1),o("el-row",{staticClass:"footer"},[o("el-form-item",{attrs:{label:"产品服务"}},[o("el-checkbox-group",{model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},t._l(t.checkgrouplist,(function(e){return o("el-checkbox",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.value))])})),1)],1)],1),o("el-row",{staticClass:"footer"},[o("el-button",{directives:[{name:"show",rawName:"v-show",value:t.btnshow,expression:"btnshow"}],attrs:{size:"small"},on:{click:t.backstep}},[t._v("返回上一步")]),o("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.gostep}},[t._v(t._s(t.btntext))])],1)],1)],1),o("el-card",{directives:[{name:"show",rawName:"v-show",value:1===t.step,expression:"step===1"}],staticClass:"box-card"},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("span",[t._v("商品sku信息")])]),o("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.product,"label-position":t.labelPosition,"label-width":"100px"}},[o("el-row",[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"标题"}},[o("el-input",{attrs:{placeholder:"标题"},model:{value:t.product.detailTitle,callback:function(e){t.$set(t.product,"detailTitle",e)},expression:"product.detailTitle"}})],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"副标题"}},[o("el-input",{attrs:{placeholder:"副标题"},model:{value:t.product.subTitle,callback:function(e){t.$set(t.product,"subTitle",e)},expression:"product.subTitle"}})],1)],1)],1),o("el-row",[o("el-form-item",{attrs:{label:"画册图片"}},[[o("el-upload",{attrs:{action:"/lejuAdmin/material/uploadFileOss","list-type":"picture-card",headers:t.Token,"on-success":t.handleDownload,limit:5},model:{value:t.product.albumPics,callback:function(e){t.$set(t.product,"albumPics",e)},expression:"product.albumPics"}},[o("div",{staticStyle:{display:"flex"}},[t.product.albumPics.length>0?o("div",{staticStyle:{display:"flex"}},t._l(t.product.albumPics,(function(t,e){return o("img",{key:e,staticStyle:{"margin-left":"5px"},attrs:{height:"150",width:"150",src:t,alt:""}})})),0):t._e(),o("i",{staticClass:"el-icon-plus",staticStyle:{padding:"65px"}})]),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb,文件不超过5个")])])]],2)],1),o("el-row",[o("el-col",{attrs:{span:16}},[o("el-form-item",{attrs:{label:"sku设置"}},[o("el-row",[o("el-checkbox-group",{staticStyle:{display:"flex"},model:{value:t.checkColorList,callback:function(e){t.checkColorList=e},expression:"checkColorList"}},t._l(t.Colorlist,(function(e,s){return o("div",{key:s},[o("el-checkbox",{attrs:{label:e}}),o("el-button",{staticStyle:{color:"red","margin-left":"3px"},attrs:{size:"small",type:"text"}},[t._v("删除")])],1)})),0)],1),o("el-row",[o("el-checkbox-group",{staticStyle:{display:"flex"},model:{value:t.checkSizeList,callback:function(e){t.checkSizeList=e},expression:"checkSizeList"}},t._l(t.Sizelist,(function(e,s){return o("div",{key:s},[o("el-checkbox",{attrs:{label:e}}),o("el-button",{staticStyle:{color:"red","margin-left":"3px"},attrs:{size:"small",type:"text"}},[t._v("删除")])],1)})),0)],1),o("el-input",{staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"颜色描述:比如土豪金"},model:{value:t.color,callback:function(e){t.color=e},expression:"color"}}),o("el-button",{staticStyle:{margin:"0 20px"},attrs:{size:"small"},on:{click:t.creatColor}},[t._v("创建颜色选项")]),o("el-input",{staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"大小"},model:{value:t.size,callback:function(e){t.size=e},expression:"size"}}),o("el-button",{staticStyle:{margin:"0 20px"},attrs:{size:"small"},on:{click:t.createSize}},[t._v("创建大小选项")])],1)],1),o("el-col",{attrs:{span:4}},[o("el-form-item",[o("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.createSku}},[t._v("生成sku列表")]),o("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.newAddSku}},[t._v("新增sku")])],1)],1)],1),t.pmsSkuStockList.length>0?o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.pmsSkuStockList,border:""}},[o("el-table-column",{attrs:{fixed:"left",type:"index",label:"#",width:"50"}}),o("el-table-column",{attrs:{prop:"",label:"图片",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-upload",{ref:"upload",staticClass:"avatar-uploader",attrs:{action:"/lejuAdmin/material/uploadFileOss",headers:t.Token,"show-file-list":!1,"on-success":t.handleAvatarSuccess},nativeOn:{click:function(o){return t.upload(e)}}},[e.row.pic?o("img",{staticClass:"avatar",attrs:{height:"100",width:"100",src:e.row.pic}}):o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])]}}],null,!1,2840634526)}),o("el-table-column",{attrs:{prop:"color",label:"颜色",width:"180"}}),o("el-table-column",{attrs:{prop:"size",label:"大小",width:"180"}}),o("el-table-column",{attrs:{prop:"stock",label:"库存",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input",{attrs:{size:"small",placeholder:"自定义库存"},model:{value:e.row.stock,callback:function(o){t.$set(e.row,"stock",o)},expression:"scope.row.stock"}})]}}],null,!1,1648970494)}),o("el-table-column",{attrs:{prop:"lowStock",label:"预备库存",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input",{attrs:{size:"small",placeholder:"预备库存"},model:{value:e.row.lowStock,callback:function(o){t.$set(e.row,"lowStock",o)},expression:"scope.row.lowStock"}})]}}],null,!1,3899272048)}),o("el-table-column",{attrs:{prop:"lockStock",label:"锁定库存",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input",{attrs:{size:"small",placeholder:"锁定库存"},model:{value:e.row.lockStock,callback:function(o){t.$set(e.row,"lockStock",o)},expression:"scope.row.lockStock"}})]}}],null,!1,1022813143)}),o("el-table-column",{attrs:{prop:"skuCode",label:"sku编码",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input",{attrs:{size:"small"},model:{value:e.row.skuCode,callback:function(o){t.$set(e.row,"skuCode",o)},expression:"scope.row.skuCode"}})]}}],null,!1,3148437721)}),o("el-table-column",{attrs:{prop:"price",label:"价格",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input",{attrs:{size:"small"},model:{value:e.row.skuCode,callback:function(o){t.$set(e.row,"skuCode",o)},expression:"scope.row.skuCode"}})]}}],null,!1,3148437721)}),o("el-table-column",{attrs:{prop:"sale",label:"销量",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input",{attrs:{size:"small"},model:{value:e.row.sale,callback:function(o){t.$set(e.row,"sale",o)},expression:"scope.row.sale"}})]}}],null,!1,4046809602)}),o("el-table-column",{attrs:{fixed:"right",label:"删除",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{staticStyle:{color:"red"},attrs:{type:"text"},on:{click:function(o){return t.del(e.row.id)}}},[t._v("删除")])]}}],null,!1,934225136)})],1):t._e()],1),o("el-row",{staticClass:"footer"},[o("el-button",{directives:[{name:"show",rawName:"v-show",value:t.btnshow,expression:"btnshow"}],attrs:{size:"small"},on:{click:t.backstep}},[t._v("返回上一步")]),o("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.gostep}},[t._v(t._s(t.btntext))])],1)],1),o("el-card",{directives:[{name:"show",rawName:"v-show",value:2===t.step,expression:"step===2"}],staticClass:"box-card"},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("span",[t._v("详情描述")])]),o("el-form",{staticClass:"demo-form-inline",attrs:{model:t.product,"label-position":t.labelPosition,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"商品详情"}},[o("TEditor",{ref:"Ti"})],1),o("el-form-item",{attrs:{label:"备注"}},[o("el-input",{attrs:{type:"textarea",placeholder:"备注","show-word-limit":""},model:{value:t.product.note,callback:function(e){t.$set(t.product,"note",e)},expression:"product.note"}})],1)],1),o("el-row",{staticClass:"footer"},[o("el-button",{directives:[{name:"show",rawName:"v-show",value:t.btnshow,expression:"btnshow"}],attrs:{size:"small"},on:{click:t.backstep}},[t._v("返回上一步")]),t.editid?t._e():o("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.gostep}},[t._v(t._s(t.btntext))]),t.editid?o("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.goprevent}},[t._v(t._s(t.btntext))]):t._e()],1)],1)],1)},i=[];o("b4fb"),o("dbb3"),o("fe59"),o("9302"),o("1784"),o("053b"),o("e35a"),o("0d7a"),o("08ba"),o("f3dd"),o("0a51"),o("9b11"),o("e18c"),o("96db"),o("af86");function a(t){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}var l=o("4c09"),r=o("28f8"),n=o("896e"),c=o("d084"),u=o("2f4d"),d=o("8256");o("ecb4"),o("84c2"),o("1c2e"),o("898e"),o("5e9f");var p={data:function(){var t;return{dialogImageUrl:"",dialogVisible:!1,disabled:!1,btnshow:!1,Token:{token:""},labelPosition:"right",step:0,brandList:[],catlist:[],fileList:[],product:(t={name:"",productSn:"",productCategoryId:"",productCategoryName:"",brandId:"",brandName:"",description:"",originalPrice:"",promotionType:"0",promotionPrice:"",weight:"",verifyStatus:!1,publishStatus:!1,pic:"",recommendStatus:!1,newStatus:!1,previewStatus:!1,keywords:"",lowStock:"",sort:"",detailTitle:"",subTitle:"",albumPics:[],spData:[],skuCode:"",detailHtml:"",note:"",stock:"",lockStock:""},Object(r["a"])(t,"lowStock",""),Object(r["a"])(t,"sale",""),Object(r["a"])(t,"price",""),Object(r["a"])(t,"serviceIds",""),t),color:"",size:"",checkList:[],checkgrouplist:[{id:1,value:"无忧退货"},{id:2,value:"快速退款"},{id:3,value:"免费包邮"}],Colorlist:[],Sizelist:[],checkColorList:[],checkSizeList:[],pmsSkuStockList:[],itemId:"",skuavlue:[],editid:""}},components:{TEditor:d["a"]},created:function(){this.Token.token=Object(u["b"])(),this.findAllBrand(),this.getAllcategory(),this.editid=this.$route.query.id,this.editid&&this.getshopDetail()},methods:{getshopDetail:function(){var t=this;c["a"].productSkusDetail(this.editid).then((function(e){console.log(e),e.data.product.serviceIds=e.data.product.serviceIds.split(),t.checkgrouplist.forEach((function(o){e.data.product.serviceIds.forEach((function(e){o.id==e&&t.checkList.push(o.id)}))})),e.data.product.previewStatus=1===e.data.product.previewStatus,e.data.product.recommendStatus=1===e.data.product.recommendStatus,e.data.product.publishStatus=1===e.data.product.publishStatus,e.data.product.verifyStatus=1===e.data.product.verifyStatus,e.data.product.newStatus=1===e.data.product.newStatus,e.data.product.albumPics=e.data.product.albumPics.split(","),t.product=e.data.product,e.data.skus.forEach((function(t){var e=JSON.parse(t.spData);e.reduce((function(e,o){t.color=e.value,t.size=o.value}))})),console.log(e.data),t.pmsSkuStockList=e.data.skus,setTimeout((function(){t.$refs.Ti.setContent(e.data.product.detailMobileHtml)}),2e3)}))},createSku:function(){var t=this;this.$confirm("此操作将清空sku列表,并生成新的列表, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.stockgoods(),t.product.spData=[]})).catch((function(){t.$message({type:"info",message:"已取消操作"})}))},newAddSku:function(){this.stockgoods()},stockgoods:function(){var t=this;if(this.pmsSkuStockList=[],0===this.checkColorList.length)return this.$message.error("请选中颜色"),0;if(0===this.checkSizeList.length)this.checkColorList.forEach((function(e){var o=[{key:"颜色",value:e}];t.product.spData.push(o)}));else{var e=[Object(l["a"])(this.checkColorList),Object(l["a"])(this.checkSizeList)],o=e.reduce((function(t,e){var o=[];return e.forEach((function(e){t.forEach((function(t){"object"===a(e)?o.push([].concat(Object(l["a"])(e),[t])):o.push([e,t])}))})),o}));o.forEach((function(e){var o=[{key:"颜色",value:e[1]},{key:"大小",value:e[0]}];t.product.spData.push(o)}))}this.skuavlue=this.product.spData,this.product.spData.forEach((function(e){var o={lockStock:"",lowStock:"",pic:"",price:0,productId:"",promotionPrice:0,sale:0,skuCode:1e5,color:e[0].value,size:e[1]?e[1].value:"",stock:"",id:Object(n["a"])()};t.pmsSkuStockList.push(o)}))},del:function(t){this.pmsSkuStockList=this.pmsSkuStockList.filter((function(e){return e.id!==t}))},creatColor:function(){if(!this.color)return this.$message.error("请填写颜色"),0;this.Colorlist.push(this.color),this.color=""},createSize:function(){if(!this.size)return this.$message.error("请填写大小"),0;this.Sizelist.push(this.size),this.size=""},findAllBrand:function(){var t=this;c["a"].findAllBrand().then((function(e){t.brandList=e.data.items}))},getAllcategory:function(){var t=this;c["a"].getAllCategory().then((function(e){t.catlist=e.data.items[1].children}))},changestasus:function(){var t=this;this.pmsSkuStockList.forEach((function(e){t.skuavlue.forEach((function(t){e.spData=JSON.stringify(t),delete e.color,delete e.size,delete e.id}))})),this.product.albumPics=this.product.albumPics.join(),this.product.detailMobileHtml=this.$refs.Ti.getContent(),this.brandList.forEach((function(e){e.id===t.product.brandId&&(t.product.brandName=e.name)})),this.catlist.forEach((function(e){e.id===t.product.productCategoryId&&(t.product.productCategoryName=e.name)})),this.product.serviceIds=this.checkList.join(),this.product.previewStatus=!0===this.product.previewStatus?1:0,this.product.recommendStatus=!0===this.product.recommendStatus?1:0,this.product.publishStatus=!0===this.product.publishStatus?1:0,this.product.verifyStatus=!0===this.product.verifyStatus?1:0,this.product.newStatus=!0===this.product.newStatus?1:0},goprevent:function(){var t=this;this.step<3&&this.step++,3===this.step&&(this.changestasus(),c["a"].updateProductAndSkus({pmsSkuStockList:this.pmsSkuStockList,product:this.product}).then((function(e){e.success&&(t.$message.success("更新商品成功"),t.$router.push("/goods/goodslist"),t.skuavlue=null)})))},gostep:function(){var t=this;this.step<3&&this.step++,3===this.step&&(this.changestasus(),c["a"].addProductAndSkus({pmsSkuStockList:this.pmsSkuStockList,product:this.product}).then((function(e){e.success&&(t.$message.success("新增商品成功"),t.$router.push("/goods/goodslist"),t.skuavlue=null)})))},backstep:function(){this.step>0&&this.step--},handleAvatarSuccess:function(t){var e=this;this.pmsSkuStockList.forEach((function(o){o.id===e.itemId&&(o.pic=t.data.fileUrl)})),console.log(this.pmsSkuStockList)},upload:function(t){this.itemId=t.row.id},uploadpic:function(t){this.product.pic=t.data.fileUrl},handleDownload:function(t){this.product.albumPics.push(t.data.fileUrl)}},computed:{btntext:function(){var t="";switch(this.step){case 0:t="下一步,填写库存信息",this.btnshow=!1;break;case 1:t="下一步,填写库存信息",this.btnshow=!0;break;default:t="提交保存",this.btnshow=!0}return t}}},h=p,m=(o("91a7"),o("9138"),o("5d22")),f=Object(m["a"])(h,s,i,!1,null,"33fd78dc",null);e["default"]=f.exports},"4b7f":function(t,e,o){},"4c09":function(t,e,o){"use strict";o.d(e,"a",(function(){return n}));var s=o("ed16");function i(t){if(Array.isArray(t))return Object(s["a"])(t)}o("f3dd"),o("0a51"),o("9b11"),o("98e0"),o("e18c"),o("96db"),o("af86");function a(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var l=o("69a9");function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(t){return i(t)||a(t)||Object(l["a"])(t)||r()}},5278:function(t,e,o){"use strict";o("b47e")},"73c3":function(t,e,o){var s=o("4fda");t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(s)},8256:function(t,e,o){"use strict";var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"tinymce-container",class:{fullscreen:t.fullscreen},style:{width:t.containerWidth}},[o("textarea",{staticClass:"tinymce-textarea",attrs:{id:t.tinymceId}}),t._v(" "),o("div",{staticClass:"editor-custom-btn-container"})])},i=[],a=(o("513c"),o("20a5"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"upload-container"},[o("el-button",{style:{background:t.color,borderColor:t.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v(" upload ")]),o("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[o("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":t.fileList,"show-file-list":!0,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.beforeUpload,action:"https://httpbin.org/post","list-type":"picture-card"}},[o("el-button",{attrs:{size:"small",type:"primary"}},[t._v(" Click upload ")])],1),o("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v(" Cancel ")]),o("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v(" Confirm ")])],1)],1)}),l=[],r=(o("84bc"),o("2eeb"),o("fe8a"),o("e18c"),o("96db"),o("af86"),o("f1a9"),{name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[]}},methods:{checkAllSuccess:function(){var t=this;return Object.keys(this.listObj).every((function(e){return t.listObj[e].hasSuccess}))},handleSubmit:function(){var t=this,e=Object.keys(this.listObj).map((function(e){return t.listObj[e]}));this.checkAllSuccess()?(this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("Please wait for all images to be uploaded successfully. If there is a network problem, please refresh the page and upload again!")},handleSuccess:function(t,e){for(var o=e.uid,s=Object.keys(this.listObj),i=0,a=s.length;i<a;i++)if(this.listObj[s[i]].uid===o)return this.listObj[s[i]].url=t.files.file,void(this.listObj[s[i]].hasSuccess=!0)},handleRemove:function(t){for(var e=t.uid,o=Object.keys(this.listObj),s=0,i=o.length;s<i;s++)if(this.listObj[o[s]].uid===e)return void delete this.listObj[o[s]]},beforeUpload:function(t){var e=this,o=window.URL||window.webkitURL,s=t.uid;return this.listObj[s]={},new Promise((function(i,a){var l=new Image;l.src=o.createObjectURL(t),l.onload=function(){e.listObj[s]={hasSuccess:!1,uid:t.uid,width:this.width,height:this.height}},i(!0)}))}}}),n=r,c=(o("5278"),o("5d22")),u=Object(c["a"])(n,a,l,!1,null,"3dae379b",null),d=u.exports,p=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],h=p,m=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],f=m,b=o("1377"),v=[];function k(){return window.tinymce}var y=function(t,e){var o=document.getElementById(t),s=e||function(){};if(!o){var i=document.createElement("script");i.src=t,i.id=t,document.body.appendChild(i),v.push(s);var a="onload"in i?l:r;a(i)}function l(e){e.onload=function(){this.onerror=this.onload=null;var t,o=Object(b["a"])(v);try{for(o.s();!(t=o.n()).done;){var s=t.value;s(null,e)}}catch(i){o.e(i)}finally{o.f()}v=null},e.onerror=function(){this.onerror=this.onload=null,s(new Error("Failed to load "+t),e)}}function r(t){t.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;var e,o=Object(b["a"])(v);try{for(o.s();!(e=o.n()).done;){var s=e.value;s(null,t)}}catch(i){o.e(i)}finally{o.f()}v=null}}}o&&s&&(k()?s(null,o):v.push(s))},w=y,g=o("0c6d");function S(t){return Object(g["a"])({url:"/lejuAdmin/material/uploadFileOss",method:"POST",data:t})}var x={upload:S},_="https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js",C={name:"Tinymce",components:{editorImage:d},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:"auto"}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"}}},computed:{containerWidth:function(){var t=this.width;return/^[\d]+(\.[\d]+)?$/.test(t)?"".concat(t,"px"):t}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick((function(){return window.tinymce.get(e.tinymceId).setContent(t||"")}))}},mounted:function(){this.init()},activated:function(){window.tinymce&&this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{init:function(){var t=this;w(_,(function(e){e?t.$message.error(e.message):t.initTinymce()}))},initTinymce:function(){var t=this,e=this;window.tinymce.init({selector:"#".concat(this.tinymceId),language:this.languageTypeList["zh"],height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:f,menubar:this.menubar,plugins:h,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(o){e.value&&o.setContent(e.value),e.hasInit=!0,o.on("NodeChange Change KeyUp SetContent",(function(){t.hasChange=!0,t.$emit("input",o.getContent())}))},setup:function(t){t.on("FullscreenStateChanged",(function(t){e.fullscreen=t.state}))},convert_urls:!1,images_upload_handler:function(t,o,s,i){i(0);var a=new FormData;a.append("file",t.blob()),x.upload(a).then((function(t){console.log(t),t.success?(o(t.data.fileUrl),i(100)):(e.$message.error("上传失败,请重新上传"),i(100))}))}})},destroyTinymce:function(){var t=window.tinymce.get(this.tinymceId);this.fullscreen&&t.execCommand("mceFullScreen"),t&&t.destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){return window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){window.tinymce.get(this.tinymceId).insertContent('<img class="wscnph" src="'.concat(t,'" >'))}}},j=C,$=(o("944e"),Object(c["a"])(j,s,i,!1,null,"5987a14e",null));e["a"]=$.exports},"896e":function(t,e,o){"use strict";var s,i=new Uint8Array(16);function a(){if(!s&&(s="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!s))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return s(i)}var l=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function r(t){return"string"===typeof t&&l.test(t)}for(var n=r,c=[],u=0;u<256;++u)c.push((u+256).toString(16).substr(1));function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=(c[t[e+0]]+c[t[e+1]]+c[t[e+2]]+c[t[e+3]]+"-"+c[t[e+4]]+c[t[e+5]]+"-"+c[t[e+6]]+c[t[e+7]]+"-"+c[t[e+8]]+c[t[e+9]]+"-"+c[t[e+10]]+c[t[e+11]]+c[t[e+12]]+c[t[e+13]]+c[t[e+14]]+c[t[e+15]]).toLowerCase();if(!n(o))throw TypeError("Stringified UUID is invalid");return o}var p=d;function h(t,e,o){t=t||{};var s=t.random||(t.rng||a)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e){o=o||0;for(var i=0;i<16;++i)e[o+i]=s[i];return e}return p(s)}e["a"]=h},8980:function(t,e,o){var s=o("d88d"),i=o("c7e6"),a=o("2732"),l=Math.ceil,r=function(t){return function(e,o,r){var n,c,u=String(a(e)),d=u.length,p=void 0===r?" ":String(r),h=s(o);return h<=d||""==p?u:(n=h-d,c=i.call(p,l(n/p.length)),c.length>n&&(c=c.slice(0,n)),t?u+c:c+u)}};t.exports={start:r(!1),end:r(!0)}},"898e":function(t,e,o){"use strict";var s=o("1c8b"),i=o("8980").start,a=o("73c3");s({target:"String",proto:!0,forced:a},{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},9138:function(t,e,o){"use strict";o("4b7f")},"91a7":function(t,e,o){"use strict";o("088c")},9302:function(t,e,o){"use strict";var s=o("1c8b"),i=o("692f"),a=o("da10"),l=o("d7e1"),r=[].join,n=i!=Object,c=l("join",",");s({target:"Array",proto:!0,forced:n||!c},{join:function(t){return r.call(a(this),void 0===t?",":t)}})},"944e":function(t,e,o){"use strict";o("d295")},b47e:function(t,e,o){},d295:function(t,e,o){}}]);